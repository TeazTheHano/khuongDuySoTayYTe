let x = [
    {
        "collection": "STYTSTYT",
        "mode": "Mode 1",
        "variables": {
            "4": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 4
            },
            "8": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 8
            },
            "12": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 12
            },
            "16": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 16
            },
            "20": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 20
            },
            "24": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 24
            },
            "28": {
                "$type": "FLOAT",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": 28
            },
            "Base": {
                "Purple": {
                    "20": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#f6f5ff"
                    },
                    "40": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#ede2fd"
                    },
                    "60": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#e3e4fd"
                    },
                    "80": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#6b6dab"
                    },
                    "100": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#0a0836"
                    }
                },
                "white": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ffffff"
                },
                "black": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#000000"
                },
                "Grey": {
                    "40": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#f4f2f1"
                    },
                    "60": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#d6d6d6"
                    },
                    "80": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#9f9f9f"
                    },
                    "100": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#696969"
                    }
                },
                "Red": {
                    "60": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#fae1e8"
                    },
                    "100": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#e13b4f"
                    }
                },
                "Blue": {
                    "60": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#e0ebfd"
                    },
                    "100": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#5589e8"
                    }
                },
                "Orange": {
                    "60": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#f0b49d"
                    },
                    "100": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "#db6e48"
                    }
                }
            },
            "Background": {
                "main": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.white"
                },
                "Dark": {
                    "1": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Purple.80"
                    },
                    "2": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.black"
                    }
                },
                "Light": {
                    "1": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.white"
                    },
                    "2": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "rgba(255, 255, 255, 0.70)"
                    },
                    "red": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Red.60"
                    },
                    "orange": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Orange.60"
                    },
                    "blue": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Blue.60"
                    },
                    "pur 60": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Purple.60"
                    },
                    "pur 40": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Purple.40"
                    },
                    "pur 20": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Purple.20"
                    }
                }
            },
            "Text": {
                "Color": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ffffff"
                },
                "Light": {
                    "1": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.white"
                    },
                    "2": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Grey.60"
                    }
                },
                "Dark": {
                    "1": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Purple.100"
                    },
                    "2": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Purple.80"
                    },
                    "3": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Grey.100"
                    },
                    "Red": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Red.100"
                    },
                    "Orange": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Orange.100"
                    },
                    "Blue": {
                        "$type": "COLOR",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": "$.STYTSTYT.Mode 1.Base.Blue.100"
                    }
                }
            },
            "Content": {
                "1": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.white"
                },
                "2": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.black"
                },
                "3": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.Purple.100"
                },
                "Subtile": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.Grey.100"
                },
                "Subtile 2": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.Grey.80"
                },
                "Subtitle 3": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "$.STYTSTYT.Mode 1.Base.Grey.60"
                }
            }
        }
    },
    {
        "collection": "Quoteversesuoteverses",
        "mode": "Mode 1",
        "variables": {
            "Base": {
                "White": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ffffff"
                },
                "Black": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#000000"
                },
                "Orange": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ff5f0f"
                },
                "Green neon": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#d5fa52"
                },
                "Green": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#28ec97"
                },
                "Pink": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#c966d3"
                },
                "Blue": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#1743bc"
                },
                "Purple": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#bacdf8"
                }
            },
            "Background": {
                "White": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ffffff"
                },
                "Black": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#000000"
                },
                "Orange": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ff5f0f"
                },
                "Green neon": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#d5fa52"
                },
                "Green": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#28ec97"
                },
                "Pink": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#c966d3"
                },
                "Blue": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#1743bc"
                },
                "Purple": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#bacdf8"
                }
            },
            "Content": {
                "White": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ffffff"
                },
                "Black": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#000000"
                },
                "Orange": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ff5f0f"
                },
                "Green neon": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#d5fa52"
                },
                "Green": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#28ec97"
                },
                "Pink": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#c966d3"
                },
                "Blue": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#1743bc"
                },
                "Purple": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#bacdf8"
                }
            },
            "Sizing": {
                "Color": {
                    "$type": "COLOR",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": "#ffffff"
                },
                "Size text": {
                    "Heading": {
                        "Medium": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 18
                        }
                    },
                    "Bodytext": {
                        "Medium": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 16
                        }
                    },
                    "Extratext": {
                        "small": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 12
                        },
                        "medium": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 14
                        }
                    },
                    "Titletext": {
                        "Exlarge": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 32
                        },
                        "Large": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 24
                        },
                        "Medim": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 20
                        },
                        "Small": {
                            "$type": "FLOAT",
                            "$scopes": [
                                "ALL_SCOPES"
                            ],
                            "$value": 18
                        }
                    }
                },
                "Number": {
                    "$type": "FLOAT",
                    "$scopes": [
                        "ALL_SCOPES"
                    ],
                    "$value": 0
                },
                "Spacingng": {
                    "4": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 4
                    },
                    "8": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 8
                    },
                    "12": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 12
                    },
                    "16": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 16
                    },
                    "20": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 20
                    },
                    "24": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 24
                    },
                    "28": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 28
                    },
                    "32": {
                        "$type": "FLOAT",
                        "$scopes": [
                            "ALL_SCOPES"
                        ],
                        "$value": 32
                    }
                }
            },
            "Color": {
                "$type": "COLOR",
                "$scopes": [
                    "ALL_SCOPES"
                ],
                "$value": "#ffffff"
            }
        }
    }
]

type ColorValue = string;
type ColorVariable = { [key: string]: { $type: string; $scopes: string[]; $value: ColorValue } };
type ModeVariables = { [key: string]: ColorVariable | { $type: string; $scopes: string[]; $value: ColorValue } | ModeVariables };
type Mode = { collection: string; mode: string; variables: ModeVariables };

const resolveColorValue = (value: ColorValue, modes: Mode[]): ColorValue => {
    if (typeof value === 'string' && value.startsWith('$.')) {
        const path = value.slice(2);
        if (path.split('.')[0].includes(' ')) {
            let newCollection = path.split('.')[0]
            let newPath = path.split('.').slice(2).join('/');
            let newMode = path.split('.').slice(1, 2).join('/');

            let x = getColor(newPath, newCollection, newMode) || value;
            return x
        }
    }
    return value;
};

const getColor = (path: string, collection: string = 'Main green', mode: string = colorMode, data: Mode[] = x): ColorValue | undefined => {
    const pathParts = path.split('/');
    let current: any = data.find(m => m.collection === collection && m.mode === mode)?.variables;

    for (const part of pathParts) {
        if (current && typeof current === 'object') {
            current = current[part];
        } else {
            return undefined;
        }
    }

    if (current && typeof current === 'object' && '$value' in current) {
        return resolveColorValue(current.$value, data);
    }

    return undefined;
};


export default getColor;

const modes = ['Green', 'Orange', 'HEHE', 'Fitness'];
const modeNum = 0
export const colorMode = modes[modeNum]